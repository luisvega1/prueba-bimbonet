<section>
  <h2 class="font-bold text-2xl">Bienvenido, {{ (user$ | async)?.name }}!</h2>
  <p>Desde este panel podras administrar el contenido de bromas.</p>
</section>
<section class="my-5 w-full">
  <button
    [routerLink]="['/dashboard/joke']"
    class="rounded-full bg-blue-950 py-2 px-10 text-white"
  >
    <i class="fa-regular fa-square-plus"></i> Agregar nueva broma
  </button>
</section>
<section class="my-5">
  <h2 class="font-bold text-2xl mb-5">Contenido destacado:</h2>
  <div class="flex pb-5 overflow-x-scroll">
    @for (joke of jokes$ | async; track joke.id) {
      @if (joke.destacado) {
        <app-joke [joke]="joke" [destacado]="true" />
      }
    } @empty {
      <p>
        No cuentas con contenido destacado, puedes agregar un contenido a
        destacados presionando la
        <i class="fa-regular fa-star text-yellow-400"></i> en un chiste.
      </p>
    }
  </div>
</section>
<section class="my-5">
  <h2 class="font-bold text-2xl mb-5">Todo el contenido:</h2>

  <div class="mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center">
    <div class="flex flex-row gap-4 items-start sm:items-center">
      <div class="flex flex-col">
        <label for="categoryFilter" class="font-bold text-sm mb-1"
          >Filtrar por categoría:</label
        >
        <select
          id="categoryFilter"
          class="shadow-md border border-gray-200 rounded-lg p-2 min-w-[150px]"
          [value]="filtroCategoria()"
          (change)="handleCambioCategoria($event)"
        >
          <option value="all">Todas las categorías</option>
          @for (category of categorias; track category) {
            <option [value]="category">{{ category }}</option>
          }
        </select>
      </div>
      <div class="flex flex-col">
        <label class="font-bold text-sm mb-1">Ordenar:</label>
        <button
          type="button"
          class="px-4 py-2 rounded-lg border border-gray-200 shadow-md hover:bg-gray-50 transition-colors"
          (click)="handleOrdenarAlfabetico()"
        >
          <i class="fa-solid fa-sort-alpha-down mr-2"></i>
          {{ filtroAlfabeticoActivo() ? "A-Z (Activo)" : "A-Z" }}
        </button>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
    @for (joke of jokesFiltrados(); track joke.id) {
      <app-joke [joke]="joke" />
    } @empty {
      <p>
        No cuentas con chistes registrados, para agregar nuevos haz click en el
        botón "Agregar nuevo chiste" en la parte de arriba.
      </p>
    }
  </div>
</section>
